{{if .Stats}}
<div class="stats-row">
    <div class="stat-card">
        <div class="stat-value">{{formatNumber .Stats.Requests}}</div>
        {{if .Comparison}}<div class="stat-delta {{deltaClass .Comparison.RequestsDelta}}">{{deltaArrow .Comparison.RequestsDelta}} {{formatDelta .Comparison.RequestsDelta}}</div>{{end}}
        <div class="stat-label">Total Requests</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{formatNumber .Stats.Visitors}}</div>
        {{if .Comparison}}<div class="stat-delta {{deltaClass .Comparison.VisitorsDelta}}">{{deltaArrow .Comparison.VisitorsDelta}} {{formatDelta .Comparison.VisitorsDelta}}</div>{{end}}
        <div class="stat-label">Unique Visitors</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{formatBytes .Stats.Bytes}}</div>
        {{if .Comparison}}<div class="stat-delta {{deltaClass .Comparison.BytesDelta}}">{{deltaArrow .Comparison.BytesDelta}} {{formatDelta .Comparison.BytesDelta}}</div>{{end}}
        <div class="stat-label">Bandwidth</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{.Stats.AvgMs}} ms</div>
        {{if .Comparison}}<div class="stat-delta {{deltaClass .Comparison.AvgMsDelta}}">{{deltaArrow .Comparison.AvgMsDelta}} {{formatDelta .Comparison.AvgMsDelta}}</div>{{end}}
        <div class="stat-label">Avg Response Time</div>
    </div>
</div>
{{end}}

{{if .RequestsChart}}
<div class="card">
    <h3>Requests / Visitors</h3>
    <div class="timeseries-chart">
        {{range $i, $point := .RequestsChart}}
        <div class="timeseries-col" data-tooltip="{{formatTimeLabel .Label}}: {{formatNumber .Count}} requests">
            <div class="timeseries-value">{{formatNumber .Count}}</div>
            <div class="timeseries-bars" style="height: {{pct .Count $.MaxRequests}}%;">
                <div class="timeseries-bar-hits" style="height: 100%;"></div>
                {{range $.VisitorsChart}}{{if eq .Label $point.Label}}{{if gt .Count 0}}<div class="timeseries-bar-visitors" style="height: {{pct .Count $point.Count}}%;"></div>{{end}}{{end}}{{end}}
            </div>
            <div class="timeseries-label">{{formatTimeLabel .Label}}</div>
        </div>
        {{end}}
    </div>
    <div class="chart-legend">
        <span class="chart-legend-item"><span class="chart-legend-dot" style="background: var(--brand);"></span> Requests</span>
        <span class="chart-legend-item"><span class="chart-legend-dot" style="background: var(--success);"></span> Visitors</span>
    </div>
</div>
{{else}}
<div class="card">
    <h3>Requests / Visitors</h3>
    <div class="empty-state" style="min-height: 160px; padding: 2rem;">
        <div class="empty-state-title">No data available</div>
        <div class="empty-state-description">Try adjusting the date range or filters.</div>
    </div>
</div>
{{end}}
