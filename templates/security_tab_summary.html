<!-- Summary Stats Row -->
<div class="stats-row">
    <div class="stat-card">
        <div class="stat-value">{{formatNumber .TotalUnrouted}}</div>
        <div class="stat-label">Unrouted Requests</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{formatPct .BotPct}}</div>
        <div class="stat-label">Bot Traffic</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{formatNumber .Total5xx}}</div>
        <div class="stat-label">5xx Errors</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{if .SlowestAvgMs}}{{.SlowestAvgMs}} ms{{else}}-{{end}}</div>
        <div class="stat-label">Slowest Avg</div>
    </div>
</div>

<!-- Threat Pattern Breakdown -->
<div class="card">
    <div class="card-header">Threat Pattern Classification</div>
    {{if .ThreatPatterns}}
        {{range .ThreatPatterns}}
        <div class="chart-row">
            <span class="chart-row-label">{{.Category}}</span>
            <div class="chart-row-track">
                <div class="chart-row-fill" style="width: {{pct .Count $.MaxThreat}}%; background: var(--error);"></div>
            </div>
            <span class="chart-row-value">{{formatNumber .Count}} <span class="text-secondary" style="font-size: 0.85em;">({{formatPct .Pct}})</span></span>
        </div>
        <div class="text-secondary" style="font-size: 0.85em; margin: -4px 0 8px 130px;">
            {{range .Examples}}{{.}} {{end}}
        </div>
        {{end}}
    {{else}}
        <p class="text-secondary">No unrouted traffic in this period.</p>
    {{end}}
</div>

<!-- Bot vs Human -->
<div class="card">
    <div class="card-header">Bot vs Human Traffic</div>
    {{if .TotalTraffic}}
        <div class="chart-stacked-track" style="display: flex; height: 28px; border-radius: 4px; overflow: hidden; margin-bottom: 10px;">
            {{if .HumanCount}}
            <div style="width: {{pct .HumanCount .TotalTraffic}}%; background: var(--success); display: flex; align-items: center; justify-content: center; color: #fff; font-size: 0.85em; font-weight: 600;">
                {{formatPct .HumanPct}}
            </div>
            {{end}}
            {{if .BotCount}}
            <div style="width: {{pct .BotCount .TotalTraffic}}%; background: var(--warning); display: flex; align-items: center; justify-content: center; color: #fff; font-size: 0.85em; font-weight: 600;">
                {{formatPct .BotPct}}
            </div>
            {{end}}
        </div>
        <div style="display: flex; gap: 16px; font-size: 0.85em; margin-bottom: 12px;">
            <span><span style="display: inline-block; width: 10px; height: 10px; border-radius: 2px; background: var(--success); margin-right: 4px;"></span> Human ({{formatNumber .HumanCount}})</span>
            <span><span style="display: inline-block; width: 10px; height: 10px; border-radius: 2px; background: var(--warning); margin-right: 4px;"></span> Bot ({{formatNumber .BotCount}})</span>
        </div>
        {{if .BotBreakdown}}
        <div style="border-top: 1px solid var(--border-default); padding-top: 10px;">
            <div class="text-secondary" style="font-size: 0.85em; margin-bottom: 8px;">Bot breakdown:</div>
            {{range .BotBreakdown}}
            <div class="chart-row">
                <span class="chart-row-label">{{.Category}}</span>
                <div class="chart-row-track">
                    <div class="chart-row-fill" style="width: {{pct .Count $.BotCount}}%; background: var(--warning);"></div>
                </div>
                <span class="chart-row-value">{{formatNumber .Count}}</span>
            </div>
            {{end}}
        </div>
        {{end}}
    {{else}}
        <p class="text-secondary">No traffic data available.</p>
    {{end}}
</div>
